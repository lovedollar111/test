package cn.dogplanet.ui.shop.adapter;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.TextView;import java.util.ArrayList;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;import cn.dogplanet.GlobalContext;import cn.dogplanet.R;import cn.dogplanet.app.util.StringUtils;import cn.dogplanet.app.widget.RoundCornerImageView;import cn.dogplanet.constant.WConstant;import cn.dogplanet.entity.ShopBuyDetail;import cn.dogplanet.net.volley.toolbox.ListImageListener;import cn.dogplanet.net.volley.toolbox.NetworkImageView;/** * 产品购买列表 * editor:ztr * package_name:cn.dogplanet.ui.shop.adapter * file_name:ShopBuyAdapter.java * date:2016-12-6 */public class ShopBuyAdapter extends BaseAdapter {    private Context context;    private List<ShopBuyDetail> buyDetails;    public ShopBuyAdapter(Context context) {        super();        this.context = context;        buyDetails = new ArrayList<>();    }    @Override    public int getCount() {        // TODO Auto-generated method stub        return buyDetails.size();    }    @Override    public Object getItem(int position) {        // TODO Auto-generated method stub        return buyDetails.get(position);    }    @Override    public long getItemId(int position) {        // TODO Auto-generated method stub        return position;    }    public void addAll(List<ShopBuyDetail> details) {        buyDetails.addAll(details);        notifyDataSetChanged();    }    public void add(ShopBuyDetail buyDetail) {        buyDetails.add(buyDetail);        notifyDataSetChanged();    }    public void clear() {        buyDetails.clear();    }    @Override    public View getView(int position, View convertView, ViewGroup parent) {        // TODO Auto-generated method stub        ShopBuyDetail shopBuyDetail = buyDetails.get(position);        ViewHolder holder;        if (convertView == null) {            convertView = LayoutInflater.from(context).inflate(R.layout.shop_buy_detail_adapter, parent, false);            holder = new ViewHolder(convertView);            convertView.setTag(holder);        } else {            holder = (ViewHolder) convertView.getTag();        }        String url=shopBuyDetail.getImgUrl();        if (StringUtils.isNotBlank(url)) {            holder.adImg.setTag(url);            ListImageListener imageListener = new ListImageListener(                    holder.adImg, WConstant.IMG_DEF_RES_ID,                    WConstant.IMG_ERROR_RES_ID, url);            GlobalContext.getInstance().getImageLoader()                    .get(url, imageListener);        } else {            holder.adImg.setImageResource(WConstant.IMG_DEF_RES_ID);        }        holder.adTime.setText(shopBuyDetail.getTime());        int totalPrice=Integer.parseInt(shopBuyDetail.getNum())*Integer.parseInt(shopBuyDetail.getPrice());        holder.adPrice.setText(String.format("¥%d", totalPrice));        holder.adMainName.setText(shopBuyDetail.getChild_name());        holder.adChildName.setText(String.format("%s人", shopBuyDetail.getNum()));        return convertView;    }    static class ViewHolder {        @BindView(R.id.ad_img)        RoundCornerImageView adImg;        @BindView(R.id.ad_main_name)        TextView adMainName;        @BindView(R.id.ad_child_name)        TextView adChildName;        @BindView(R.id.ad_time)        TextView adTime;        @BindView(R.id.ad_price)        TextView adPrice;        ViewHolder(View view) {            ButterKnife.bind(this, view);        }    }}